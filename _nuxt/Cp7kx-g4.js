var Ue=Object.defineProperty;var pe=n=>{throw TypeError(n)};var Fe=(n,t,s)=>t in n?Ue(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var te=(n,t,s)=>Fe(n,typeof t!="symbol"?t+"":t,s),se=(n,t,s)=>t.has(n)||pe("Cannot "+s);var l=(n,t,s)=>(se(n,t,"read from private field"),s?s.call(n):t.get(n)),J=(n,t,s)=>t.has(n)?pe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,s),ee=(n,t,s,i)=>(se(n,t,"write to private field"),i?i.call(n,s):t.set(n,s),s),p=(n,t,s)=>(se(n,t,"access private method"),s);import{_ as ne}from"./Vw8T9wsv.js";import{k as me,j as we,o as N,w as C,l as ye,m as ke,e as v,n as Ce,r as T,p as ge,q as G,s as Be,v as Se,x as Ie,c as S,y as le,z as Te,A as Ee,f as Ve,b as F,a as m,F as he,u as W,d as k,t as $,h as $e}from"./BChm8QdC.js";import{c as _e}from"./DjqsqOe8.js";import{u as Me,g as Pe,a as Le,b as Re,m as Ae}from"./GvWKFksZ.js";import{P as We}from"./BTqb9XRP.js";import{_ as ve,a as be}from"./BaATFnB1.js";import{s as z,_ as ze}from"./CpFsRuOh.js";import{a as je,d as Ye,b as L,c as E,g as Ne,e as De,t as He,f as qe,h as re,m as xe,B as Je,i as ie}from"./Cyp0RKsw.js";const Oe=me({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(n){const t=n;return Me(),(s,i)=>(N(),we(v(We),ke(t,{onMousedown:i[0]||(i[0]=a=>{!a.defaultPrevented&&a.detail>1&&a.preventDefault()})}),{default:C(()=>[ye(s.$slots,"default")]),_:3},16))}}),Ge=BigInt(-1),_=BigInt(0),Y=BigInt(1),Ze=BigInt(5),j={};let D="0000";for(;D.length<80;)D+=D;function M(n){let t=D;for(;t.length<n;)t+=t;return BigInt("1"+t.substring(0,n))}function O(n,t,s){const i=BigInt(t.width);if(t.signed){const a=Y<<i-Y;E(s==null||n>=-a&&n<a,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:n}),n>_?n=re(xe(n,i),i):n=-re(xe(-n,i),i)}else{const a=Y<<i;E(s==null||n>=0&&n<a,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:n}),n=(n%a+a)%a&a-Y}return n}function ae(n){typeof n=="number"&&(n=`fixed128x${n}`);let t=!0,s=128,i=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")t=!1;else{const d=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);L(d,"invalid fixed format","format",n),t=d[1]!=="u",s=parseInt(d[2]),i=parseInt(d[3])}}else if(n){const d=n,o=(f,w,B)=>d[f]==null?B:(L(typeof d[f]===w,"invalid fixed format ("+f+" not "+w+")","format."+f,d[f]),d[f]);t=o("signed","boolean",t),s=o("width","number",s),i=o("decimals","number",i)}L(s%8===0,"invalid FixedNumber width (not byte aligned)","format.width",s),L(i<=80,"invalid FixedNumber decimals (too large)","format.decimals",i);const a=(t?"":"u")+"fixed"+String(s)+"x"+String(i);return{signed:t,width:s,decimals:i,name:a}}function Ke(n,t){let s="";n<_&&(s="-",n*=Ge);let i=n.toString();if(t===0)return s+i;for(;i.length<=t;)i=D+i;const a=i.length-t;for(i=i.substring(0,a)+"."+i.substring(a);i[0]==="0"&&i[1]!==".";)i=i.substring(1);for(;i[i.length-1]==="0"&&i[i.length-2]!==".";)i=i.substring(0,i.length-1);return s+i}var U,c,h,u,P,I,ue,ce,de,fe;const V=class V{constructor(t,s,i){J(this,u);te(this,"format");J(this,U);J(this,c);J(this,h);te(this,"_value");je(t,j,"FixedNumber"),ee(this,c,s),ee(this,U,i);const a=Ke(s,i.decimals);Ye(this,{format:i.name,_value:a}),ee(this,h,M(i.decimals))}get signed(){return l(this,U).signed}get width(){return l(this,U).width}get decimals(){return l(this,U).decimals}get value(){return l(this,c)}addUnsafe(t){return p(this,u,ue).call(this,t)}add(t){return p(this,u,ue).call(this,t,"add")}subUnsafe(t){return p(this,u,ce).call(this,t)}sub(t){return p(this,u,ce).call(this,t,"sub")}mulUnsafe(t){return p(this,u,de).call(this,t)}mul(t){return p(this,u,de).call(this,t,"mul")}mulSignal(t){p(this,u,P).call(this,t);const s=l(this,c)*l(t,c);return E(s%l(this,h)===_,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),p(this,u,I).call(this,s/l(this,h),"mulSignal")}divUnsafe(t){return p(this,u,fe).call(this,t)}div(t){return p(this,u,fe).call(this,t,"div")}divSignal(t){E(l(t,c)!==_,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),p(this,u,P).call(this,t);const s=l(this,c)*l(this,h);return E(s%l(t,c)===_,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),p(this,u,I).call(this,s/l(t,c),"divSignal")}cmp(t){let s=this.value,i=t.value;const a=this.decimals-t.decimals;return a>0?i*=M(a):a<0&&(s*=M(-a)),s<i?-1:s>i?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=l(this,c);return l(this,c)<_&&(t-=l(this,h)-Y),t=l(this,c)/l(this,h)*l(this,h),p(this,u,I).call(this,t,"floor")}ceiling(){let t=l(this,c);return l(this,c)>_&&(t+=l(this,h)-Y),t=l(this,c)/l(this,h)*l(this,h),p(this,u,I).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const s=this.decimals-t,i=Ze*M(s-1);let a=this.value+i;const d=M(s);return a=a/d*d,O(a,l(this,U),"round"),new V(j,a,l(this,U))}isZero(){return l(this,c)===_}isNegative(){return l(this,c)<_}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return V.fromString(this.toString(),t)}static fromValue(t,s,i){const a=s==null?0:Ne(s),d=ae(i);let o=De(t,"value");const f=a-d.decimals;if(f>0){const w=M(f);E(o%w===_,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=w}else f<0&&(o*=M(-f));return O(o,d,"fromValue"),new V(j,o,d)}static fromString(t,s){const i=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);L(i&&i[2].length+i[3].length>0,"invalid FixedNumber string value","value",t);const a=ae(s);let d=i[2]||"0",o=i[3]||"";for(;o.length<a.decimals;)o+=D;E(o.substring(a.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,a.decimals);const f=BigInt(i[1]+d+o);return O(f,a,"fromString"),new V(j,f,a)}static fromBytes(t,s){let i=He(qe(t,"value"));const a=ae(s);return a.signed&&(i=re(i,a.width)),O(i,a,"fromBytes"),new V(j,i,a)}};U=new WeakMap,c=new WeakMap,h=new WeakMap,u=new WeakSet,P=function(t){L(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},I=function(t,s){return t=O(t,l(this,U),s),new V(j,t,l(this,U))},ue=function(t,s){return p(this,u,P).call(this,t),p(this,u,I).call(this,l(this,c)+l(t,c),s)},ce=function(t,s){return p(this,u,P).call(this,t),p(this,u,I).call(this,l(this,c)-l(t,c),s)},de=function(t,s){return p(this,u,P).call(this,t),p(this,u,I).call(this,l(this,c)*l(t,c)/l(this,h),s)},fe=function(t,s){return E(l(t,c)!==_,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),p(this,u,P).call(this,t),p(this,u,I).call(this,l(this,c)*l(this,h)/l(t,c),s)};let oe=V;function Qe(n,t){L(typeof n=="string","value must be a string","value",n);let s=18;return s=Ne(t,"unit"),oe.fromString(n,{decimals:s,width:512}).value}function Xe(n){return Qe(n,18)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const et=n=>typeof n<"u";function tt(n){return JSON.parse(JSON.stringify(n))}function st(n,t,s,i={}){var a,d,o;const{clone:f=!1,passive:w=!1,eventName:B,deep:H=!1,defaultValue:q,shouldEmit:Z}=i,y=Ce(),K=s||(y==null?void 0:y.emit)||((a=y==null?void 0:y.$emit)==null?void 0:a.bind(y))||((o=(d=y==null?void 0:y.proxy)==null?void 0:d.$emit)==null?void 0:o.bind(y==null?void 0:y.proxy));let R=B;R=R||`update:${t.toString()}`;const Q=b=>f?typeof f=="function"?f(b):tt(b):b,A=()=>et(n[t])?Q(n[t]):q,X=b=>{Z?Z(b)&&K(R,b):K(R,b)};if(w){const b=A(),g=T(b);let r=!1;return ge(()=>n[t],x=>{r||(r=!0,g.value=Q(x),Be(()=>r=!1))}),ge(g,x=>{!r&&(x!==n[t]||H)&&X(x)},{deep:H}),g}else return G({get(){return A()},set(b){X(b)}})}const nt=me({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(n,{emit:t}){const s=n,a=st(s,"modelValue",t,{passive:!0,defaultValue:s.defaultValue});return(d,o)=>Se((N(),S("input",{"onUpdate:modelValue":o[0]||(o[0]=f=>Te(a)?a.value=f:null),"data-slot":"input",class:le(v(_e)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s.class))},null,2)),[[Ie,v(a)]])}}),it=me({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const t=n,s=G(()=>{const{class:i,...a}=t;return a});return(i,a)=>(N(),we(v(Oe),ke({"data-slot":"label"},s.value,{class:v(_e)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t.class)}),{default:C(()=>[ye(i.$slots,"default")]),_:3},16,["class"]))}}),at={class:"min-h-screen px-6 py-10 text-white"},lt={key:0},rt={class:"flex justify-center mb-6"},ot=["src"],ut={class:"flex items-center justify-center gap-4 mb-6"},ct={key:0,class:"animate-spin h-6 w-6 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},dt={class:"text-center text-sm mb-4"},ft={class:"mb-6"},mt={key:0,class:"text-red-500 text-sm mb-4 mt-1"},pt={key:0,class:"text-center text-sm mb-2"},gt={key:1,class:"text-center text-sm mb-2"},ht={key:1,class:"flex justify-center px-6 py-16 text-center"},Ct={__name:"pack-opening",setup(n){const t=T(1),s=T(""),i=T(!1);let a,d;const o=T(60),f=T(0),w=T(0),B=T(!1),H=G(()=>(t.value*.05).toFixed(2)),q=G(()=>s.value===""||ie(s.value)),Z=G(()=>t.value===0?`${W().app.baseURL}/imgs/pacc0.png`:t.value===1?`${W().app.baseURL}/imgs/pacc1.png`:t.value===2?`${W().app.baseURL}/imgs/pacc2.png`:t.value===3?`${W().app.baseURL}/imgs/pacc3.png`:t.value===4?`${W().app.baseURL}/imgs/pacc4.png`:`${W().app.baseURL}/imgs/pacc5.png`),y=()=>{t.value<o.value?t.value++:z(`You can only buy ${o} packs`,e)},K=()=>{t.value>1&&t.value--},R=async()=>{try{window.ethereum||z("Wallet not found. Install MetaMask.",e),a=new Je(window.ethereum),(await a.send("eth_accounts",[])).length>0?(d=await a.getSigner(),i.value=!0,await A(0)):z("Wallet not connected",e)}catch(g){z("Connection Error",g)}},Q=()=>{s.value&&ie(s.value)?A(1):s.value===""&&A(0)},A=async g=>{try{const r=g==0?await Pe():await Le(s.value),x=await Re();console.log("Pointer:",x),console.log("Count:",r),f.value=(1500-Number(x))/5,w.value=(250-Number(r))/5,o.value=Math.min(f.value,w.value),o.value<0?(o.value=0,t.value=0):t.value=1}catch(r){z("Error Fetching NFTs",r)}},X=Ee(),b=async()=>{try{if(B.value=!0,!i.value)throw new Error("Wallet not connected.");if(t.value>o.value)throw new Error(`You can only buy ${o.value} packs.`);const g=s.value!=""?s.value:await d.getAddress();if(!ie(g))throw new Error("Invalid address format.");const r=Xe(H.value),x=await Ae(g,t.value,r);console.log("Waiting for confirmation...");const vt=await x.wait();console.log("Minting successful! :",x),X.push({path:"/result",query:{address:g,txHash:x.hash,packs:t.value}})}catch(g){z("Minting Error",g)}finally{B.value=!1}};return Ve(async()=>{await R()}),(g,r)=>(N(),S(he,null,[F(v(ze)),m("div",at,[i.value?(N(),S("div",lt,[F(v(be),{class:"max-w-2xl mx-auto p-10 rounded-2xl shadow-lg backdrop-blur border border-white/20"},{default:C(()=>[F(v(ve),null,{default:C(()=>[r[11]||(r[11]=m("h1",{class:"text-3xl font-bold mb-6 text-center"},"Open Packs",-1)),m("div",rt,[m("img",{src:Z.value,alt:"Pack preview",class:"w-60"},null,8,ot)]),m("div",ut,[F(v(ne),{variant:"outline",onClick:K,class:"bg-yellow-200 text-xl text-black hover:bg-yellow-300 font-bold"},{default:C(()=>r[1]||(r[1]=[k("-")])),_:1}),F(v(ne),{onClick:b,disabled:t.value===0||B.value,class:le(["sm:w-48 h-14 text-xl font-bold px-6 py-3 flex items-center justify-center",t.value===0||B.value?"bg-gray-400 text-white cursor-not-allowed":"bg-yellow-400 text-black hover:bg-yellow-500"])},{default:C(()=>[B.value?(N(),S("svg",ct,r[2]||(r[2]=[m("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),m("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):(N(),S(he,{key:1},[k(" Open "+$(t.value)+" pack"+$(t.value>1?"s":""),1)],64))]),_:1},8,["disabled","class"]),F(v(ne),{variant:"outline",onClick:y,class:"bg-yellow-200 text-xl text-black hover:bg-yellow-300 font-bold"},{default:C(()=>r[3]||(r[3]=[k("+")])),_:1})]),m("p",dt,[r[4]||(r[4]=k(" Estimated total: ")),m("strong",null,$(H.value)+" ETH",1),r[5]||(r[5]=k(" + gas fee "))]),m("div",ft,[F(v(it),{for:"address"},{default:C(()=>r[6]||(r[6]=[k("Address (optional)")])),_:1}),F(v(nt),{id:"address",type:"text",placeholder:"0x... or leave blank to use your own",modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=x=>s.value=x),class:le(["mt-2",!q.value&&s.value?"border-red-500":""]),onKeyup:Q},null,8,["modelValue","class"]),!q.value&&s.value?(N(),S("p",mt," Invalid Ethereum address ")):$e("",!0)]),r[12]||(r[12]=m("p",{class:"text-center text-sm mb-2"},[m("strong",null,"Each pack contains 5 random NFTs and costs 0.05 ETH + gas fee"),m("br"),m("br"),k(" You can open a pack for yourself or for a friend by specifying the destination wallet address. If you don't, the pack will be opened for your current wallet. "),m("br"),m("br"),k(" ⚠️ "),m("strong",null,"Warning"),k(": you can't open more packs if you reach a total of 250 cards on your wallet or if the maximum limit of packs that can be opened is reached. "),m("br")],-1)),q.value&&s.value?(N(),S("p",pt,[k(" The address you have specified can still open "+$(w.value)+" packs. There are still "+$(f.value)+" packs available in the Blockchain. ",1),r[7]||(r[7]=m("br",null,null,-1)),r[8]||(r[8]=m("br",null,null,-1))])):(N(),S("p",gt,[k(" You can still open "+$(w.value)+" packs. There are still "+$(f.value)+" packs available in the Blockchain. ",1),r[9]||(r[9]=m("br",null,null,-1)),r[10]||(r[10]=m("br",null,null,-1))]))]),_:1})]),_:1})])):(N(),S("div",ht,[F(v(be),{class:"max-w-4xl p-8"},{default:C(()=>[F(v(ve),null,{default:C(()=>r[13]||(r[13]=[m("h1",{class:"text-4xl sm:text-5xl md:text-4xl font-bold tracking-tight mb-6 text-center p-4"}," Wallet not connected ",-1),m("p",{class:"md:text-xl leading-relaxed"}," To view your collection, connect with MetaMask ",-1)])),_:1})]),_:1})]))])],64))}};export{Ct as default};
