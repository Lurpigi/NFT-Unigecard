var Ut=Object.defineProperty;var ft=n=>{throw TypeError(n)};var _t=(n,t,s)=>t in n?Ut(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var et=(n,t,s)=>_t(n,typeof t!="symbol"?t+"":t,s),st=(n,t,s)=>t.has(n)||ft("Cannot "+s);var a=(n,t,s)=>(st(n,t,"read from private field"),s?s.call(n):t.get(n)),Y=(n,t,s)=>t.has(n)?ft("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,s),Q=(n,t,s,i)=>(st(n,t,"write to private field"),i?i.call(n,s):t.set(n,s),s),m=(n,t,s)=>(st(n,t,"access private method"),s);import{_ as nt}from"./Bwzvp-Vp.js";import{q as ct,p as bt,o as I,w as U,s as xt,v as wt,j as v,x as Ct,r as B,y as mt,z as X,A as Ft,B as Bt,C as St,c as A,D as yt,E as Et,G as It,k as $t,b as k,a as p,F as pt,g as P,d as N,t as H}from"./CIMKAMhE.js";import{c as kt}from"./DjqsqOe8.js";import{u as Vt,g as Mt,a as Tt,m as Pt}from"./DIc2bnTv.js";import{P as Lt}from"./BtL0qRor.js";import{_ as gt,a as ht}from"./DLIcJcaY.js";import{s as L,_ as Rt}from"./Dw7Q0UDp.js";import{a as At,d as Wt,b as M,c as S,g as Nt,e as zt,t as jt,f as Dt,h as lt,m as vt,B as Yt}from"./ulqfyjqD.js";const Ht=ct({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(n){const t=n;return Vt(),(s,i)=>(I(),bt(v(Lt),wt(t,{onMousedown:i[0]||(i[0]=r=>{!r.defaultPrevented&&r.detail>1&&r.preventDefault()})}),{default:U(()=>[xt(s.$slots,"default")]),_:3},16))}}),qt=BigInt(-1),w=BigInt(0),W=BigInt(1),Gt=BigInt(5),R={};let z="0000";for(;z.length<80;)z+=z;function $(n){let t=z;for(;t.length<n;)t+=t;return BigInt("1"+t.substring(0,n))}function q(n,t,s){const i=BigInt(t.width);if(t.signed){const r=W<<i-W;S(s==null||n>=-r&&n<r,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:n}),n>w?n=lt(vt(n,i),i):n=-lt(vt(-n,i),i)}else{const r=W<<i;S(s==null||n>=0&&n<r,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:n}),n=(n%r+r)%r&r-W}return n}function it(n){typeof n=="number"&&(n=`fixed128x${n}`);let t=!0,s=128,i=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")t=!1;else{const c=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);M(c,"invalid fixed format","format",n),t=c[1]!=="u",s=parseInt(c[2]),i=parseInt(c[3])}}else if(n){const c=n,o=(f,b,_)=>c[f]==null?_:(M(typeof c[f]===b,"invalid fixed format ("+f+" not "+b+")","format."+f,c[f]),c[f]);t=o("signed","boolean",t),s=o("width","number",s),i=o("decimals","number",i)}M(s%8===0,"invalid FixedNumber width (not byte aligned)","format.width",s),M(i<=80,"invalid FixedNumber decimals (too large)","format.decimals",i);const r=(t?"":"u")+"fixed"+String(s)+"x"+String(i);return{signed:t,width:s,decimals:i,name:r}}function Jt(n,t){let s="";n<w&&(s="-",n*=qt);let i=n.toString();if(t===0)return s+i;for(;i.length<=t;)i=z+i;const r=i.length-t;for(i=i.substring(0,r)+"."+i.substring(r);i[0]==="0"&&i[1]!==".";)i=i.substring(1);for(;i[i.length-1]==="0"&&i[i.length-2]!==".";)i=i.substring(0,i.length-1);return s+i}var y,d,h,u,V,F,at,ot,ut,dt;const E=class E{constructor(t,s,i){Y(this,u);et(this,"format");Y(this,y);Y(this,d);Y(this,h);et(this,"_value");At(t,R,"FixedNumber"),Q(this,d,s),Q(this,y,i);const r=Jt(s,i.decimals);Wt(this,{format:i.name,_value:r}),Q(this,h,$(i.decimals))}get signed(){return a(this,y).signed}get width(){return a(this,y).width}get decimals(){return a(this,y).decimals}get value(){return a(this,d)}addUnsafe(t){return m(this,u,at).call(this,t)}add(t){return m(this,u,at).call(this,t,"add")}subUnsafe(t){return m(this,u,ot).call(this,t)}sub(t){return m(this,u,ot).call(this,t,"sub")}mulUnsafe(t){return m(this,u,ut).call(this,t)}mul(t){return m(this,u,ut).call(this,t,"mul")}mulSignal(t){m(this,u,V).call(this,t);const s=a(this,d)*a(t,d);return S(s%a(this,h)===w,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),m(this,u,F).call(this,s/a(this,h),"mulSignal")}divUnsafe(t){return m(this,u,dt).call(this,t)}div(t){return m(this,u,dt).call(this,t,"div")}divSignal(t){S(a(t,d)!==w,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),m(this,u,V).call(this,t);const s=a(this,d)*a(this,h);return S(s%a(t,d)===w,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),m(this,u,F).call(this,s/a(t,d),"divSignal")}cmp(t){let s=this.value,i=t.value;const r=this.decimals-t.decimals;return r>0?i*=$(r):r<0&&(s*=$(-r)),s<i?-1:s>i?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=a(this,d);return a(this,d)<w&&(t-=a(this,h)-W),t=a(this,d)/a(this,h)*a(this,h),m(this,u,F).call(this,t,"floor")}ceiling(){let t=a(this,d);return a(this,d)>w&&(t+=a(this,h)-W),t=a(this,d)/a(this,h)*a(this,h),m(this,u,F).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const s=this.decimals-t,i=Gt*$(s-1);let r=this.value+i;const c=$(s);return r=r/c*c,q(r,a(this,y),"round"),new E(R,r,a(this,y))}isZero(){return a(this,d)===w}isNegative(){return a(this,d)<w}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return E.fromString(this.toString(),t)}static fromValue(t,s,i){const r=s==null?0:Nt(s),c=it(i);let o=zt(t,"value");const f=r-c.decimals;if(f>0){const b=$(f);S(o%b===w,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=b}else f<0&&(o*=$(-f));return q(o,c,"fromValue"),new E(R,o,c)}static fromString(t,s){const i=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);M(i&&i[2].length+i[3].length>0,"invalid FixedNumber string value","value",t);const r=it(s);let c=i[2]||"0",o=i[3]||"";for(;o.length<r.decimals;)o+=z;S(o.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,r.decimals);const f=BigInt(i[1]+c+o);return q(f,r,"fromString"),new E(R,f,r)}static fromBytes(t,s){let i=jt(Dt(t,"value"));const r=it(s);return r.signed&&(i=lt(i,r.width)),q(i,r,"fromBytes"),new E(R,i,r)}};y=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakSet,V=function(t){M(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},F=function(t,s){return t=q(t,a(this,y),s),new E(R,t,a(this,y))},at=function(t,s){return m(this,u,V).call(this,t),m(this,u,F).call(this,a(this,d)+a(t,d),s)},ot=function(t,s){return m(this,u,V).call(this,t),m(this,u,F).call(this,a(this,d)-a(t,d),s)},ut=function(t,s){return m(this,u,V).call(this,t),m(this,u,F).call(this,a(this,d)*a(t,d)/a(this,h),s)},dt=function(t,s){return S(a(t,d)!==w,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),m(this,u,V).call(this,t),m(this,u,F).call(this,a(this,d)*a(this,h)/a(t,d),s)};let rt=E;function Ot(n,t){M(typeof n=="string","value must be a string","value",n);let s=18;return s=Nt(t,"unit"),rt.fromString(n,{decimals:s,width:512}).value}function Zt(n){return Ot(n,18)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Kt=n=>typeof n<"u";function Qt(n){return JSON.parse(JSON.stringify(n))}function Xt(n,t,s,i={}){var r,c,o;const{clone:f=!1,passive:b=!1,eventName:_,deep:j=!1,defaultValue:tt,shouldEmit:G}=i,x=Ct(),J=s||(x==null?void 0:x.emit)||((r=x==null?void 0:x.$emit)==null?void 0:r.bind(x))||((o=(c=x==null?void 0:x.proxy)==null?void 0:c.$emit)==null?void 0:o.bind(x==null?void 0:x.proxy));let T=_;T=T||`update:${t.toString()}`;const O=l=>f?typeof f=="function"?f(l):Qt(l):l,Z=()=>Kt(n[t])?O(n[t]):tt,g=l=>{G?G(l)&&J(T,l):J(T,l)};if(b){const l=Z(),C=B(l);let D=!1;return mt(()=>n[t],K=>{D||(D=!0,C.value=O(K),Ft(()=>D=!1))}),mt(C,K=>{!D&&(K!==n[t]||j)&&g(K)},{deep:j}),C}else return X({get(){return Z()},set(l){g(l)}})}const te=ct({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(n,{emit:t}){const s=n,r=Xt(s,"modelValue",t,{passive:!0,defaultValue:s.defaultValue});return(c,o)=>Bt((I(),A("input",{"onUpdate:modelValue":o[0]||(o[0]=f=>Et(r)?r.value=f:null),"data-slot":"input",class:yt(v(kt)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s.class))},null,2)),[[St,v(r)]])}}),ee=ct({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const t=n,s=X(()=>{const{class:i,...r}=t;return r});return(i,r)=>(I(),bt(v(Ht),wt({"data-slot":"label"},s.value,{class:v(kt)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t.class)}),{default:U(()=>[xt(i.$slots,"default")]),_:3},16,["class"]))}}),se={class:"min-h-screen px-6 py-10 text-white"},ne={key:0},ie={class:"flex justify-center mb-6"},le=["src"],re={class:"flex items-center justify-center gap-4 mb-6"},ae={key:0,class:"animate-spin h-6 w-6 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},oe={class:"text-center text-sm mb-4"},ue={class:"mb-6"},de={class:"text-center text-sm mb-2"},ce={key:1,class:"flex justify-center px-6 py-16 text-center"},ye={__name:"pack-opening",setup(n){const t=B(1),s=B(""),i=B(!1);let r,c;const o=B(60),f=B(0),b=B(0),_=B(!1),j=X(()=>(t.value*.05).toFixed(2)),tt=X(()=>t.value===0?`${P().app.baseURL}/imgs/pacc0.png`:t.value===1?`${P().app.baseURL}/imgs/pacc1.png`:t.value===2?`${P().app.baseURL}/imgs/pacc2.png`:t.value===3?`${P().app.baseURL}/imgs/pacc3.png`:t.value===4?`${P().app.baseURL}/imgs/pacc4.png`:`${P().app.baseURL}/imgs/pacc5.png`),G=()=>{t.value<o.value?t.value++:L(`You can only buy ${o} packs`,e)},x=()=>{t.value>1&&t.value--},J=async()=>{try{window.ethereum||L("Wallet not found. Install MetaMask.",e),r=new Yt(window.ethereum),(await r.send("eth_accounts",[])).length>0?(c=await r.getSigner(),i.value=!0,await T()):L("Wallet not connected",e)}catch(g){L("Connection Error",g)}},T=async()=>{try{const g=await Mt(),l=await Tt();console.log("Pointer:",l),console.log("Count:",g),f.value=(1500-Number(l))/5,b.value=(250-Number(g))/5,o.value=Math.min(f.value,b.value),o.value<0&&(o.value=0,t.value=0)}catch(g){L("Error Fetching NFTs",g)}},O=It(),Z=async()=>{try{if(_.value=!0,!i.value)throw new Error("Wallet not connected.");if(t.value>o.value)throw new Error(`You can only buy ${o.value} packs.`);const g=s.value!=""?s.value:await c.getAddress(),l=Zt(j.value),C=await Pt(g,t.value,l);console.log("Waiting for confirmation...");const D=await C.wait();console.log("Minting successful! :",C),O.push({path:"/result",query:{address:g,txHash:C.hash,packs:t.value}})}catch(g){L("Minting Error",g)}finally{_.value=!1}};return $t(async()=>{await J()}),(g,l)=>(I(),A(pt,null,[k(v(Rt)),p("div",se,[i.value?(I(),A("div",ne,[k(v(ht),{class:"max-w-2xl mx-auto p-10 rounded-2xl shadow-lg backdrop-blur border border-white/20"},{default:U(()=>[k(v(gt),null,{default:U(()=>[l[20]||(l[20]=p("h1",{class:"text-3xl font-bold mb-6 text-center"},"Open Packs",-1)),p("div",ie,[p("img",{src:tt.value,alt:"Pack preview",class:"w-60"},null,8,le)]),p("div",re,[k(v(nt),{variant:"outline",onClick:x,class:"bg-yellow-200 text-xl text-black hover:bg-yellow-300 font-bold"},{default:U(()=>l[1]||(l[1]=[N("-")])),_:1}),k(v(nt),{onClick:Z,disabled:t.value===0||_.value,class:yt(["sm:w-48 h-14 text-xl font-bold px-6 py-3 flex items-center justify-center",t.value===0||_.value?"bg-gray-400 text-white cursor-not-allowed":"bg-yellow-400 text-black hover:bg-yellow-500"])},{default:U(()=>[_.value?(I(),A("svg",ae,l[2]||(l[2]=[p("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),p("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):(I(),A(pt,{key:1},[N(" Open "+H(t.value)+" pack"+H(t.value>1?"s":""),1)],64))]),_:1},8,["disabled","class"]),k(v(nt),{variant:"outline",onClick:G,class:"bg-yellow-200 text-xl text-black hover:bg-yellow-300 font-bold"},{default:U(()=>l[3]||(l[3]=[N("+")])),_:1})]),p("p",oe,[l[4]||(l[4]=N(" Estimated total: ")),p("strong",null,H(j.value)+" ETH",1),l[5]||(l[5]=N(" + gas fee "))]),p("div",ue,[k(v(ee),{for:"address"},{default:U(()=>l[6]||(l[6]=[N("Address (optional)")])),_:1}),k(v(te),{id:"address",type:"text",placeholder:"0x... or leave blank to use your own",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=C=>s.value=C),class:"mt-2"},null,8,["modelValue"])]),p("p",de,[l[7]||(l[7]=p("strong",null,"Each pack contains 5 random NFTs and costs 0.05 ETH + gas fee",-1)),l[8]||(l[8]=p("br",null,null,-1)),l[9]||(l[9]=p("br",null,null,-1)),l[10]||(l[10]=N(" You can open a pack for yourself or for a friend by specifying the destination wallet address. If you don't, the pack will be opened for your current wallet. ")),l[11]||(l[11]=p("br",null,null,-1)),l[12]||(l[12]=p("br",null,null,-1)),l[13]||(l[13]=N(" ⚠️ ")),l[14]||(l[14]=p("strong",null,"Warning",-1)),l[15]||(l[15]=N(": you can't open more packs if you reach a total of 250 cards on your wallet or if the maximum limit of packs that can be opened is reached. ")),l[16]||(l[16]=p("br",null,null,-1)),l[17]||(l[17]=p("br",null,null,-1)),N(" You can still open "+H(b.value)+" packs. There are still "+H(f.value)+" packs available in the Blockchain. ",1),l[18]||(l[18]=p("br",null,null,-1)),l[19]||(l[19]=p("br",null,null,-1))])]),_:1})]),_:1})])):(I(),A("div",ce,[k(v(ht),{class:"max-w-4xl p-8"},{default:U(()=>[k(v(gt),null,{default:U(()=>l[21]||(l[21]=[p("h1",{class:"text-4xl sm:text-5xl md:text-4xl font-bold tracking-tight mb-6 text-center p-4"}," Wallet not connected ",-1),p("p",{class:"md:text-xl leading-relaxed"}," To view your collection, connect with MetaMask ",-1)])),_:1})]),_:1})]))])],64))}};export{ye as default};
