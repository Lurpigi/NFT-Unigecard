var kt=Object.defineProperty;var dt=n=>{throw TypeError(n)};var Nt=(n,t,s)=>t in n?kt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var X=(n,t,s)=>Nt(n,typeof t!="symbol"?t+"":t,s),tt=(n,t,s)=>t.has(n)||dt("Cannot "+s);var a=(n,t,s)=>(tt(n,t,"read from private field"),s?s.call(n):t.get(n)),j=(n,t,s)=>t.has(n)?dt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,s),Y=(n,t,s,i)=>(tt(n,t,"write to private field"),i?i.call(n,s):t.set(n,s),s),m=(n,t,s)=>(tt(n,t,"access private method"),s);import{_ as et}from"./DUJEb2r-.js";import{q as Ft,s as St,v as M,x as C,y as vt,z as Bt,A as Ct,C as Ut,D as it,E as ft,G as ct,p as bt,o as E,w as N,H as xt,J as wt,j as v,K as Et,r as A,L as mt,M as Z,N as It,O as Vt,P as Mt,c as L,Q as yt,R as Tt,S as $t,k as Pt,b as k,a as g,F as gt,B as At,d as F,t as st}from"./Dtu0JvHn.js";import{c as _t}from"./DjqsqOe8.js";import{u as Lt,g as Rt,m as Wt}from"./CM1jaFP9.js";import{P as zt}from"./CYw9dD7C.js";import{_ as pt,a as ht}from"./dBFWUy7R.js";import{s as $,_ as jt}from"./O9TmTQVe.js";const Dt=BigInt(-1),w=BigInt(0),R=BigInt(1),Ht=BigInt(5),P={};let W="0000";for(;W.length<80;)W+=W;function I(n){let t=W;for(;t.length<n;)t+=t;return BigInt("1"+t.substring(0,n))}function D(n,t,s){const i=BigInt(t.width);if(t.signed){const r=R<<i-R;C(s==null||n>=-r&&n<r,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:n}),n>w?n=it(ft(n,i),i):n=-it(ft(-n,i),i)}else{const r=R<<i;C(s==null||n>=0&&n<r,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:n}),n=(n%r+r)%r&r-R}return n}function nt(n){typeof n=="number"&&(n=`fixed128x${n}`);let t=!0,s=128,i=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")t=!1;else{const d=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);M(d,"invalid fixed format","format",n),t=d[1]!=="u",s=parseInt(d[2]),i=parseInt(d[3])}}else if(n){const d=n,l=(c,_,z)=>d[c]==null?z:(M(typeof d[c]===_,"invalid fixed format ("+c+" not "+_+")","format."+c,d[c]),d[c]);t=l("signed","boolean",t),s=l("width","number",s),i=l("decimals","number",i)}M(s%8===0,"invalid FixedNumber width (not byte aligned)","format.width",s),M(i<=80,"invalid FixedNumber decimals (too large)","format.decimals",i);const r=(t?"":"u")+"fixed"+String(s)+"x"+String(i);return{signed:t,width:s,decimals:i,name:r}}function Jt(n,t){let s="";n<w&&(s="-",n*=Dt);let i=n.toString();if(t===0)return s+i;for(;i.length<=t;)i=W+i;const r=i.length-t;for(i=i.substring(0,r)+"."+i.substring(r);i[0]==="0"&&i[1]!==".";)i=i.substring(1);for(;i[i.length-1]==="0"&&i[i.length-2]!==".";)i=i.substring(0,i.length-1);return s+i}var y,u,h,o,V,S,at,lt,ot,ut;const U=class U{constructor(t,s,i){j(this,o);X(this,"format");j(this,y);j(this,u);j(this,h);X(this,"_value");Ft(t,P,"FixedNumber"),Y(this,u,s),Y(this,y,i);const r=Jt(s,i.decimals);St(this,{format:i.name,_value:r}),Y(this,h,I(i.decimals))}get signed(){return a(this,y).signed}get width(){return a(this,y).width}get decimals(){return a(this,y).decimals}get value(){return a(this,u)}addUnsafe(t){return m(this,o,at).call(this,t)}add(t){return m(this,o,at).call(this,t,"add")}subUnsafe(t){return m(this,o,lt).call(this,t)}sub(t){return m(this,o,lt).call(this,t,"sub")}mulUnsafe(t){return m(this,o,ot).call(this,t)}mul(t){return m(this,o,ot).call(this,t,"mul")}mulSignal(t){m(this,o,V).call(this,t);const s=a(this,u)*a(t,u);return C(s%a(this,h)===w,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),m(this,o,S).call(this,s/a(this,h),"mulSignal")}divUnsafe(t){return m(this,o,ut).call(this,t)}div(t){return m(this,o,ut).call(this,t,"div")}divSignal(t){C(a(t,u)!==w,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),m(this,o,V).call(this,t);const s=a(this,u)*a(this,h);return C(s%a(t,u)===w,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),m(this,o,S).call(this,s/a(t,u),"divSignal")}cmp(t){let s=this.value,i=t.value;const r=this.decimals-t.decimals;return r>0?i*=I(r):r<0&&(s*=I(-r)),s<i?-1:s>i?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=a(this,u);return a(this,u)<w&&(t-=a(this,h)-R),t=a(this,u)/a(this,h)*a(this,h),m(this,o,S).call(this,t,"floor")}ceiling(){let t=a(this,u);return a(this,u)>w&&(t+=a(this,h)-R),t=a(this,u)/a(this,h)*a(this,h),m(this,o,S).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const s=this.decimals-t,i=Ht*I(s-1);let r=this.value+i;const d=I(s);return r=r/d*d,D(r,a(this,y),"round"),new U(P,r,a(this,y))}isZero(){return a(this,u)===w}isNegative(){return a(this,u)<w}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return U.fromString(this.toString(),t)}static fromValue(t,s,i){const r=s==null?0:vt(s),d=nt(i);let l=Bt(t,"value");const c=r-d.decimals;if(c>0){const _=I(c);C(l%_===w,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),l/=_}else c<0&&(l*=I(-c));return D(l,d,"fromValue"),new U(P,l,d)}static fromString(t,s){const i=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);M(i&&i[2].length+i[3].length>0,"invalid FixedNumber string value","value",t);const r=nt(s);let d=i[2]||"0",l=i[3]||"";for(;l.length<r.decimals;)l+=W;C(l.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),l=l.substring(0,r.decimals);const c=BigInt(i[1]+d+l);return D(c,r,"fromString"),new U(P,c,r)}static fromBytes(t,s){let i=Ct(Ut(t,"value"));const r=nt(s);return r.signed&&(i=it(i,r.width)),D(i,r,"fromBytes"),new U(P,i,r)}};y=new WeakMap,u=new WeakMap,h=new WeakMap,o=new WeakSet,V=function(t){M(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},S=function(t,s){return t=D(t,a(this,y),s),new U(P,t,a(this,y))},at=function(t,s){return m(this,o,V).call(this,t),m(this,o,S).call(this,a(this,u)+a(t,u),s)},lt=function(t,s){return m(this,o,V).call(this,t),m(this,o,S).call(this,a(this,u)-a(t,u),s)},ot=function(t,s){return m(this,o,V).call(this,t),m(this,o,S).call(this,a(this,u)*a(t,u)/a(this,h),s)},ut=function(t,s){return C(a(t,u)!==w,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),m(this,o,V).call(this,t),m(this,o,S).call(this,a(this,u)*a(this,h)/a(t,u),s)};let rt=U;function qt(n,t){M(typeof n=="string","value must be a string","value",n);let s=18;return s=vt(t,"unit"),rt.fromString(n,{decimals:s,width:512}).value}function Gt(n){return qt(n,18)}const Ot=ct({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(n){const t=n;return Lt(),(s,i)=>(E(),bt(v(zt),wt(t,{onMousedown:i[0]||(i[0]=r=>{!r.defaultPrevented&&r.detail>1&&r.preventDefault()})}),{default:N(()=>[xt(s.$slots,"default")]),_:3},16))}});typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Yt=n=>typeof n<"u";function Zt(n){return JSON.parse(JSON.stringify(n))}function Kt(n,t,s,i={}){var r,d,l;const{clone:c=!1,passive:_=!1,eventName:z,deep:H=!1,defaultValue:K,shouldEmit:J}=i,x=Et(),q=s||(x==null?void 0:x.emit)||((r=x==null?void 0:x.$emit)==null?void 0:r.bind(x))||((l=(d=x==null?void 0:x.proxy)==null?void 0:d.$emit)==null?void 0:l.bind(x==null?void 0:x.proxy));let T=z;T=T||`update:${t.toString()}`;const p=b=>c?typeof c=="function"?c(b):Zt(b):b,f=()=>Yt(n[t])?p(n[t]):K,B=b=>{J?J(b)&&q(T,b):q(T,b)};if(_){const b=f(),Q=A(b);let G=!1;return mt(()=>n[t],O=>{G||(G=!0,Q.value=p(O),It(()=>G=!1))}),mt(Q,O=>{!G&&(O!==n[t]||H)&&B(O)},{deep:H}),Q}else return Z({get(){return f()},set(b){B(b)}})}const Qt=ct({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(n,{emit:t}){const s=n,r=Kt(s,"modelValue",t,{passive:!0,defaultValue:s.defaultValue});return(d,l)=>Vt((E(),L("input",{"onUpdate:modelValue":l[0]||(l[0]=c=>Tt(r)?r.value=c:null),"data-slot":"input",class:yt(v(_t)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s.class))},null,2)),[[Mt,v(r)]])}}),Xt=ct({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const t=n,s=Z(()=>{const{class:i,...r}=t;return r});return(i,r)=>(E(),bt(v(Ot),wt({"data-slot":"label"},s.value,{class:v(_t)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t.class)}),{default:N(()=>[xt(i.$slots,"default")]),_:3},16,["class"]))}}),te={class:"min-h-screen px-6 py-10 text-white"},ee={key:0},se={class:"flex justify-center mb-6"},ne=["src"],ie={class:"flex items-center justify-center gap-4 mb-6"},re={key:0,class:"animate-spin h-6 w-6 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ae={class:"text-center text-sm mb-4"},le={class:"mb-6"},oe={key:1,class:"flex justify-center px-6 py-16 text-center"},ve={__name:"pack-opening",setup(n){const t=A(1),s=A(""),i=A(!1);let r,d;const l=A(60),c=A(!1),_=Z(()=>(t.value*.05).toFixed(2)),z=Z(()=>t.value===0?"/imgs/pacc0.png":t.value===1?"/imgs/pacc1.png":t.value===2?"/imgs/pacc2.png":t.value===3?"/imgs/pacc3.png":t.value===4?"/imgs/pacc4.png":"/imgs/pacc5.png"),H=()=>{t.value<l.value?t.value++:$(`You can only buy ${l} packs`,e)},K=()=>{t.value>1&&t.value--},J=async()=>{try{window.ethereum||$("Wallet not found. Install MetaMask.",e),r=new At(window.ethereum),(await r.send("eth_accounts",[])).length>0?(d=await r.getSigner(),i.value=!0,await x()):$("Wallet not connected",e)}catch(p){$("Connection Error",p)}},x=async()=>{try{const p=await Rt();l.value=(250-Number(p))/5,l.value<0&&(l.value=0,t.value=0)}catch(p){$("Error Fetching NFTs",p)}},q=$t(),T=async()=>{try{if(c.value=!0,!i.value)throw new Error("Wallet not connected.");if(t.value>l.value)throw new Error(`You can only buy ${l.value} packs.`);const p=s.value!=""?s.value:await d.getAddress(),f=Gt(_.value),B=await Wt(p,t.value,f);console.log("Waiting for confirmation...");const b=await B.wait();console.log("Minting successful! :",B),q.push({path:"/result",query:{address:p,txHash:B.hash,packs:t.value}})}catch(p){$("Minting Error",p)}finally{c.value=!1}};return Pt(async()=>{await J()}),(p,f)=>(E(),L(gt,null,[k(v(jt)),g("div",te,[i.value?(E(),L("div",ee,[k(v(ht),{class:"max-w-2xl mx-auto p-10 rounded-2xl shadow-lg backdrop-blur border border-white/20"},{default:N(()=>[k(v(pt),null,{default:N(()=>[f[7]||(f[7]=g("h1",{class:"text-3xl font-bold mb-6 text-center"},"Open Packs",-1)),g("div",se,[g("img",{src:z.value,alt:"Pack preview",class:"w-60"},null,8,ne)]),g("div",ie,[k(v(et),{variant:"outline",onClick:K,class:"bg-yellow-200 text-xl text-black hover:bg-yellow-300 font-bold"},{default:N(()=>f[1]||(f[1]=[F("-")])),_:1}),k(v(et),{onClick:T,disabled:t.value===0||c.value,class:yt(["sm:w-48 h-14 text-xl font-bold px-6 py-3 flex items-center justify-center",t.value===0||c.value?"bg-gray-400 text-white cursor-not-allowed":"bg-yellow-400 text-black hover:bg-yellow-500"])},{default:N(()=>[c.value?(E(),L("svg",re,f[2]||(f[2]=[g("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),g("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):(E(),L(gt,{key:1},[F(" Open "+st(t.value)+" pack"+st(t.value>1?"s":""),1)],64))]),_:1},8,["disabled","class"]),k(v(et),{variant:"outline",onClick:H,class:"bg-yellow-200 text-xl text-black hover:bg-yellow-300 font-bold"},{default:N(()=>f[3]||(f[3]=[F("+")])),_:1})]),g("p",ae,[f[4]||(f[4]=F(" Estimated total: ")),g("strong",null,st(_.value)+" ETH",1),f[5]||(f[5]=F(" + gas fee "))]),g("div",le,[k(v(Xt),{for:"address"},{default:N(()=>f[6]||(f[6]=[F("Address (optional)")])),_:1}),k(v(Qt),{id:"address",type:"text",placeholder:"0x... or leave blank to use your own",modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=B=>s.value=B),class:"mt-2"},null,8,["modelValue"])]),f[8]||(f[8]=g("p",{class:"text-center text-sm mb-2"},[g("strong",null,"Each pack contains 5 random NFTs and costs 0.05 ETH + gas fee"),g("br"),g("br"),F(" You can open a pack for yourself or for a friend by specifying the destination wallet address. If you don't, the pack will be opened for your current wallet. "),g("br"),g("br"),F(" ⚠️ "),g("strong",null,"Warning"),F(": you can't open more packs if you reach a total of 250 cards on your wallet. ")],-1))]),_:1})]),_:1})])):(E(),L("div",oe,[k(v(ht),{class:"max-w-4xl p-8"},{default:N(()=>[k(v(pt),null,{default:N(()=>f[9]||(f[9]=[g("h1",{class:"text-4xl sm:text-5xl md:text-4xl font-bold tracking-tight mb-6 text-center p-4"}," Wallet not connected ",-1),g("p",{class:"md:text-xl leading-relaxed"}," To view your collection, connect with MetaMask ",-1)])),_:1})]),_:1})]))])],64))}};export{ve as default};
