import{_ as j}from"./Dntt3XYu.js";import{r as g,f as I,g as L,c as i,b as o,h as M,e as s,w as a,F as _,o as l,a as c,i as F,j as T,u as V,t as E,d as x}from"./BChm8QdC.js";import{_ as h,a as v}from"./D5cBtkQq.js";import{_ as y}from"./Vw8T9wsv.js";import{c as S,s as p,_ as W}from"./CpFsRuOh.js";import{B as b,I as q}from"./Cyp0RKsw.js";import"./DjqsqOe8.js";import"./BTqb9XRP.js";const A={key:0,class:"min-h-screen flex justify-center items-center px-6 py-16 text-center"},D={key:0,class:"grid grid-cols-3 sm:grid-cols-3 md:grid-cols-3 gap-6 mt-6"},H=["src","alt"],O={class:"absolute top-2 right-2 bg-black/70 text-white px-1 py-0.8 md:px-3 md:py-2 rounded"},P={key:1,class:"mt-6"},U={class:"flex flex-col sm:flex-row gap-6 justify-center mt-8"},te={__name:"result",setup(Y){const k=L(),m=g([]),w=g(!1);let f,C;const N=async()=>{try{window.ethereum||p("Wallet not found. Install MetaMask.",e),f=new b(window.ethereum),(await f.send("eth_accounts",[])).length>0?(C=await f.getSigner(),w.value=!0):p("Wallet not connected",e)}catch(n){p("Connection Error",n)}};return I(async()=>{await N();const{txHash:n}=k.query,d=await new b(window.ethereum).getTransactionReceipt(n),r=new q(S);for(const B of d.logs)try{const u=r.parseLog(B);if(u.name==="Minted"){m.value=u.args.ids.map(($,R)=>({id:Number($),amount:Number(u.args.amounts[R])}));break}}catch{continue}}),(n,t)=>{const d=j;return l(),i(_,null,[o(s(W)),w.value?(l(),i("div",A,[o(s(v),{class:"max-w-4xl p-8"},{default:a(()=>[o(s(h),null,{default:a(()=>[t[2]||(t[2]=c("h1",{class:"text-4xl sm:text-5xl md:text-5xl font-bold tracking-tight mb-6 text-center"}," Congratulations! ",-1)),t[3]||(t[3]=c("p",{class:"md:text-xl leading-relaxed"},"You found:",-1)),m.value.length?(l(),i("div",D,[(l(!0),i(_,null,F(m.value,r=>(l(),T(s(v),{key:r.id,class:"aspect-[3/4] relative overflow-hidden bg-white/5 border border-white/20 rounded-xl shadow-md transition-transform duration-300 hover:scale-105 hover:drop-shadow-lg"},{default:a(()=>[o(s(h),{class:"w-full h-full flex items-center justify-center relative"},{default:a(()=>[c("img",{src:`${("useRuntimeConfig"in n?n.useRuntimeConfig:s(V))().app.baseURL}/cards/${r.id}.png`,alt:`Card #${r.id}`,class:"object-contain w-full h-full"},null,8,H),c("div",O," Ã—"+E(r.amount),1)]),_:2},1024)]),_:2},1024))),128))])):(l(),i("p",P,"Loading or no NFTs found.")),c("div",U,[o(d,{to:"/pack-opening",class:"w-full sm:w-auto"},{default:a(()=>[o(s(y),{class:"w-full sm:w-64 h-16 text-xl bg-yellow-400 hover:bg-yellow-500 text-black font-bold rounded-2xl"},{default:a(()=>t[0]||(t[0]=[x(" Open other packs ")])),_:1})]),_:1}),o(d,{to:"/my-collection",class:"w-full sm:w-auto"},{default:a(()=>[o(s(y),{class:"w-full sm:w-64 h-16 text-xl hover:text-white font-bold rounded-2xl"},{default:a(()=>t[1]||(t[1]=[x(" My Collection ")])),_:1})]),_:1})])]),_:1})]),_:1})])):M("",!0)],64)}}};export{te as default};
