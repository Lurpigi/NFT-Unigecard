var Ne=Object.defineProperty;var ge=a=>{throw TypeError(a)};var Fe=(a,t,s)=>t in a?Ne(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;var se=(a,t,s)=>Fe(a,typeof t!="symbol"?t+"":t,s),ae=(a,t,s)=>t.has(a)||ge("Cannot "+s);var l=(a,t,s)=>(ae(a,t,"read from private field"),s?s.call(a):t.get(a)),O=(a,t,s)=>t.has(a)?ge("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,s),ee=(a,t,s,n)=>(ae(a,t,"write to private field"),n?n.call(a,s):t.set(a,s),s),m=(a,t,s)=>(ae(a,t,"access private method"),s);import{_ as ne}from"./B0Xl0aTM.js";import{k as pe,j as we,o as N,w as C,l as ye,m as _e,e as v,n as $e,r as E,p as he,q as G,s as Ce,v as Se,x as Be,c as B,y as re,z as Ie,u as w,A as Ee,f as Te,b as $,a as p,F as te,d as y,t as q,h as Ve}from"./C5tU6Sw9.js";import{c as ke}from"./DjqsqOe8.js";import{u as Le,g as Re,a as Me,b as Pe,m as Ae}from"./B_yfOFTz.js";import{P as We}from"./CIgw1aA1.js";import{_ as ve,a as be}from"./5jEnxbtk.js";import{s as z,_ as ze}from"./CcQs0JsT.js";import{u as je}from"./BbD9vjsI.js";import{a as He,d as Ye,b as M,c as T,g as Ue,e as De,t as Oe,f as qe,h as oe,m as xe,B as Je,i as ie}from"./Cyp0RKsw.js";const Ge=pe({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(a){const t=a;return Le(),(s,n)=>(N(),we(v(We),_e(t,{onMousedown:n[0]||(n[0]=i=>{!i.defaultPrevented&&i.detail>1&&i.preventDefault()})}),{default:C(()=>[ye(s.$slots,"default")]),_:3},16))}}),Ze=BigInt(-1),U=BigInt(0),H=BigInt(1),Ke=BigInt(5),j={};let Y="0000";for(;Y.length<80;)Y+=Y;function L(a){let t=Y;for(;t.length<a;)t+=t;return BigInt("1"+t.substring(0,a))}function J(a,t,s){const n=BigInt(t.width);if(t.signed){const i=H<<n-H;T(s==null||a>=-i&&a<i,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:a}),a>U?a=oe(xe(a,n),n):a=-oe(xe(-a,n),n)}else{const i=H<<n;T(s==null||a>=0&&a<i,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:a}),a=(a%i+i)%i&i-H}return a}function le(a){typeof a=="number"&&(a=`fixed128x${a}`);let t=!0,s=128,n=18;if(typeof a=="string"){if(a!=="fixed")if(a==="ufixed")t=!1;else{const d=a.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);M(d,"invalid fixed format","format",a),t=d[1]!=="u",s=parseInt(d[2]),n=parseInt(d[3])}}else if(a){const d=a,o=(f,_,S)=>d[f]==null?S:(M(typeof d[f]===_,"invalid fixed format ("+f+" not "+_+")","format."+f,d[f]),d[f]);t=o("signed","boolean",t),s=o("width","number",s),n=o("decimals","number",n)}M(s%8===0,"invalid FixedNumber width (not byte aligned)","format.width",s),M(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const i=(t?"":"u")+"fixed"+String(s)+"x"+String(n);return{signed:t,width:s,decimals:n,name:i}}function Qe(a,t){let s="";a<U&&(s="-",a*=Ze);let n=a.toString();if(t===0)return s+n;for(;n.length<=t;)n=Y+n;const i=n.length-t;for(n=n.substring(0,i)+"."+n.substring(i);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return s+n}var F,c,h,u,R,I,ce,de,fe,me;const V=class V{constructor(t,s,n){O(this,u);se(this,"format");O(this,F);O(this,c);O(this,h);se(this,"_value");He(t,j,"FixedNumber"),ee(this,c,s),ee(this,F,n);const i=Qe(s,n.decimals);Ye(this,{format:n.name,_value:i}),ee(this,h,L(n.decimals))}get signed(){return l(this,F).signed}get width(){return l(this,F).width}get decimals(){return l(this,F).decimals}get value(){return l(this,c)}addUnsafe(t){return m(this,u,ce).call(this,t)}add(t){return m(this,u,ce).call(this,t,"add")}subUnsafe(t){return m(this,u,de).call(this,t)}sub(t){return m(this,u,de).call(this,t,"sub")}mulUnsafe(t){return m(this,u,fe).call(this,t)}mul(t){return m(this,u,fe).call(this,t,"mul")}mulSignal(t){m(this,u,R).call(this,t);const s=l(this,c)*l(t,c);return T(s%l(this,h)===U,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),m(this,u,I).call(this,s/l(this,h),"mulSignal")}divUnsafe(t){return m(this,u,me).call(this,t)}div(t){return m(this,u,me).call(this,t,"div")}divSignal(t){T(l(t,c)!==U,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),m(this,u,R).call(this,t);const s=l(this,c)*l(this,h);return T(s%l(t,c)===U,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),m(this,u,I).call(this,s/l(t,c),"divSignal")}cmp(t){let s=this.value,n=t.value;const i=this.decimals-t.decimals;return i>0?n*=L(i):i<0&&(s*=L(-i)),s<n?-1:s>n?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=l(this,c);return l(this,c)<U&&(t-=l(this,h)-H),t=l(this,c)/l(this,h)*l(this,h),m(this,u,I).call(this,t,"floor")}ceiling(){let t=l(this,c);return l(this,c)>U&&(t+=l(this,h)-H),t=l(this,c)/l(this,h)*l(this,h),m(this,u,I).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const s=this.decimals-t,n=Ke*L(s-1);let i=this.value+n;const d=L(s);return i=i/d*d,J(i,l(this,F),"round"),new V(j,i,l(this,F))}isZero(){return l(this,c)===U}isNegative(){return l(this,c)<U}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return V.fromString(this.toString(),t)}static fromValue(t,s,n){const i=s==null?0:Ue(s),d=le(n);let o=De(t,"value");const f=i-d.decimals;if(f>0){const _=L(f);T(o%_===U,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=_}else f<0&&(o*=L(-f));return J(o,d,"fromValue"),new V(j,o,d)}static fromString(t,s){const n=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);M(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",t);const i=le(s);let d=n[2]||"0",o=n[3]||"";for(;o.length<i.decimals;)o+=Y;T(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,i.decimals);const f=BigInt(n[1]+d+o);return J(f,i,"fromString"),new V(j,f,i)}static fromBytes(t,s){let n=Oe(qe(t,"value"));const i=le(s);return i.signed&&(n=oe(n,i.width)),J(n,i,"fromBytes"),new V(j,n,i)}};F=new WeakMap,c=new WeakMap,h=new WeakMap,u=new WeakSet,R=function(t){M(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},I=function(t,s){return t=J(t,l(this,F),s),new V(j,t,l(this,F))},ce=function(t,s){return m(this,u,R).call(this,t),m(this,u,I).call(this,l(this,c)+l(t,c),s)},de=function(t,s){return m(this,u,R).call(this,t),m(this,u,I).call(this,l(this,c)-l(t,c),s)},fe=function(t,s){return m(this,u,R).call(this,t),m(this,u,I).call(this,l(this,c)*l(t,c)/l(this,h),s)},me=function(t,s){return T(l(t,c)!==U,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),m(this,u,R).call(this,t),m(this,u,I).call(this,l(this,c)*l(this,h)/l(t,c),s)};let ue=V;function Xe(a,t){M(typeof a=="string","value must be a string","value",a);let s=18;return s=Ue(t,"unit"),ue.fromString(a,{decimals:s,width:512}).value}function et(a){return Xe(a,18)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const tt=a=>typeof a<"u";function st(a){return JSON.parse(JSON.stringify(a))}function at(a,t,s,n={}){var i,d,o;const{clone:f=!1,passive:_=!1,eventName:S,deep:D=!1,defaultValue:P,shouldEmit:Z}=n,k=$e(),K=s||(k==null?void 0:k.emit)||((i=k==null?void 0:k.$emit)==null?void 0:i.bind(k))||((o=(d=k==null?void 0:k.proxy)==null?void 0:d.$emit)==null?void 0:o.bind(k==null?void 0:k.proxy));let A=S;A=A||`update:${t.toString()}`;const Q=b=>f?typeof f=="function"?f(b):st(b):b,W=()=>tt(a[t])?Q(a[t]):P,X=b=>{Z?Z(b)&&K(A,b):K(A,b)};if(_){const b=W(),g=E(b);let r=!1;return he(()=>a[t],x=>{r||(r=!0,g.value=Q(x),Ce(()=>r=!1))}),he(g,x=>{!r&&(x!==a[t]||D)&&X(x)},{deep:D}),g}else return G({get(){return W()},set(b){X(b)}})}const nt=pe({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(a,{emit:t}){const s=a,i=at(s,"modelValue",t,{passive:!0,defaultValue:s.defaultValue});return(d,o)=>Se((N(),B("input",{"onUpdate:modelValue":o[0]||(o[0]=f=>Ie(i)?i.value=f:null),"data-slot":"input",class:re(v(ke)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s.class))},null,2)),[[Be,v(i)]])}}),it=pe({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},setup(a){const t=a,s=G(()=>{const{class:n,...i}=t;return i});return(n,i)=>(N(),we(v(Ge),_e({"data-slot":"label"},s.value,{class:v(ke)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t.class)}),{default:C(()=>[ye(n.$slots,"default")]),_:3},16,["class"]))}}),lt={class:"min-h-screen px-6 py-10 text-white"},rt={key:0},ot={class:"flex justify-center mb-6"},ut=["src"],ct={class:"flex items-center justify-center gap-4 mb-6"},dt={key:0,class:"animate-spin h-6 w-6 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ft={class:"text-center text-sm mb-4"},mt={class:"mb-6"},pt={key:0,class:"text-red-500 text-sm mb-4 mt-1"},gt={class:"text-center text-sm mb-2"},ht={key:1,class:"flex justify-center px-6 py-16 text-center"},Ct={__name:"pack-opening",setup(a){je({link:[{rel:"preload",as:"image",href:`${w().app.baseURL}/imgs/pacc0.png`},{rel:"preload",as:"image",href:`${w().app.baseURL}/imgs/pacc1.png`},{rel:"preload",as:"image",href:`${w().app.baseURL}/imgs/pacc2.png`},{rel:"preload",as:"image",href:`${w().app.baseURL}/imgs/pacc3.png`},{rel:"preload",as:"image",href:`${w().app.baseURL}/imgs/pacc4.png`},{rel:"preload",as:"image",href:`${w().app.baseURL}/imgs/pacc5.png`}]});const t=E(1),s=E(""),n=E(!1);let i,d;const o=E(60),f=E(0),_=E(0),S=E(!1),D=G(()=>(t.value*.05).toFixed(2)),P=G(()=>s.value===""||ie(s.value)),Z=G(()=>t.value===0?`${w().app.baseURL}/imgs/pacc0.png`:t.value===1?`${w().app.baseURL}/imgs/pacc1.png`:t.value===2?`${w().app.baseURL}/imgs/pacc2.png`:t.value===3?`${w().app.baseURL}/imgs/pacc3.png`:t.value===4?`${w().app.baseURL}/imgs/pacc4.png`:`${w().app.baseURL}/imgs/pacc5.png`),k=()=>{t.value<o.value?t.value++:z(`You can only buy ${o} packs`,e)},K=()=>{t.value>1&&t.value--},A=async()=>{try{window.ethereum||z("Wallet not found. Install MetaMask.",e),i=new Je(window.ethereum),(await i.send("eth_accounts",[])).length>0?(d=await i.getSigner(),n.value=!0,await W(0)):z("Wallet not connected",e)}catch(g){z("Connection Error",g)}},Q=()=>{s.value&&ie(s.value)?W(1):s.value===""&&W(0)},W=async g=>{try{const r=g==0?await Re():await Me(s.value),x=await Pe();console.log("Pointer:",x),console.log("Count:",r),f.value=(1500-Number(x))/5,_.value=(250-Number(r))/5,o.value=Math.min(f.value,_.value),o.value<0?(o.value=0,t.value=0):t.value=1}catch(r){z("Error Fetching NFTs",r)}},X=Ee(),b=async()=>{try{if(S.value=!0,!n.value)throw new Error("Wallet not connected.");if(t.value>o.value)throw new Error(`You can only buy ${o.value} packs.`);const g=s.value!=""?s.value:await d.getAddress();if(!ie(g))throw new Error("Invalid address format.");const r=et(D.value),x=await Ae(g,t.value,r);console.log("Waiting for confirmation...");const vt=await x.wait();console.log("Minting successful! :",x),X.push({path:"/result",query:{address:g,txHash:x.hash,packs:t.value}})}catch(g){z("Minting Error",g)}finally{S.value=!1}};return Te(async()=>{await A()}),(g,r)=>(N(),B(te,null,[$(v(ze)),p("div",lt,[n.value?(N(),B("div",rt,[$(v(be),{class:"max-w-2xl mx-auto p-10 rounded-2xl shadow-lg backdrop-blur border border-white/20"},{default:C(()=>[$(v(ve),null,{default:C(()=>[r[9]||(r[9]=p("h1",{class:"text-3xl font-bold mb-6 text-center"},"Open Packs",-1)),p("div",ot,[p("img",{src:Z.value,alt:"Pack preview",class:"w-60"},null,8,ut)]),p("div",ct,[$(v(ne),{variant:"outline",onClick:K,class:"bg-yellow-200 text-xl text-black hover:bg-yellow-300 font-bold"},{default:C(()=>r[1]||(r[1]=[y("-")])),_:1,__:[1]}),$(v(ne),{onClick:b,disabled:t.value===0||S.value||!P.value,class:re(["sm:w-48 h-14 text-xl font-bold px-6 py-3 flex items-center justify-center",t.value===0||S.value?"bg-gray-400 text-white cursor-not-allowed":"bg-yellow-400 text-black hover:bg-yellow-500"])},{default:C(()=>[S.value?(N(),B("svg",dt,r[2]||(r[2]=[p("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),p("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):(N(),B(te,{key:1},[y(" Open "+q(t.value)+" pack"+q(t.value>1?"s":""),1)],64))]),_:1},8,["disabled","class"]),$(v(ne),{variant:"outline",onClick:k,class:"bg-yellow-200 text-xl text-black hover:bg-yellow-300 font-bold"},{default:C(()=>r[3]||(r[3]=[y("+")])),_:1,__:[3]})]),p("p",ft,[r[4]||(r[4]=y(" Estimated total: ")),p("strong",null,q(D.value)+" ETH",1),r[5]||(r[5]=y(" + gas fee "))]),p("div",mt,[$(v(it),{for:"address"},{default:C(()=>r[6]||(r[6]=[y("Address (optional)")])),_:1,__:[6]}),$(v(nt),{id:"address",type:"text",placeholder:"0x... or leave blank to use your own",modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=x=>s.value=x),class:re(["mt-2",!P.value&&s.value?"border-red-500":""]),onKeyup:Q},null,8,["modelValue","class"]),!P.value&&s.value?(N(),B("p",pt," Invalid Ethereum address ")):Ve("",!0)]),r[10]||(r[10]=p("p",{class:"text-center text-sm mb-2"},[p("strong",null,"Each pack contains 5 random NFTs and costs 0.05 ETH + gas fee"),p("br"),p("br"),y(" You can open a pack for yourself or for a friend by specifying the destination wallet address. If you don't, the pack will be opened for your current wallet. "),p("br"),p("br"),y(" ⚠️ "),p("strong",null,"Warning"),y(": you can't open more packs if you reach a total of 250 cards on your wallet or if the maximum limit of packs that can be opened is reached. "),p("br")],-1)),p("p",gt,[P.value&&s.value?(N(),B(te,{key:0},[y("The address you have specified")],64)):(N(),B(te,{key:1},[y("You")],64)),y(" can still open "+q(_.value)+" packs. There are still "+q(f.value)+" packs available in the Blockchain. ",1),r[7]||(r[7]=p("br",null,null,-1)),r[8]||(r[8]=p("br",null,null,-1))])]),_:1,__:[9,10]})]),_:1})])):(N(),B("div",ht,[$(v(be),{class:"max-w-4xl p-8"},{default:C(()=>[$(v(ve),null,{default:C(()=>r[11]||(r[11]=[p("h1",{class:"text-4xl sm:text-5xl md:text-4xl font-bold tracking-tight mb-6 text-center p-4"}," Wallet not connected ",-1),p("p",{class:"md:text-xl leading-relaxed"}," To view your collection, connect with MetaMask ",-1)])),_:1,__:[11]})]),_:1})]))])],64))}};export{Ct as default};
