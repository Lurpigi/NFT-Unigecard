var Ne=Object.defineProperty;var fe=n=>{throw TypeError(n)};var Ue=(n,t,s)=>t in n?Ne(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var ee=(n,t,s)=>Ue(n,typeof t!="symbol"?t+"":t,s),te=(n,t,s)=>t.has(n)||fe("Cannot "+s);var r=(n,t,s)=>(te(n,t,"read from private field"),s?s.call(n):t.get(n)),D=(n,t,s)=>t.has(n)?fe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,s),Z=(n,t,s,i)=>(te(n,t,"write to private field"),i?i.call(n,s):t.set(n,s),s),m=(n,t,s)=>(te(n,t,"access private method"),s);import{_ as se}from"./DQu74hcm.js";import{q as Fe,s as Se,v as V,x as C,y as be,z as Ce,A as Be,C as Ee,D as ae,E as me,G as de,p as xe,o as E,w as N,H as we,J as ye,j as v,K as Ie,r as P,L as pe,M as K,N as $e,O as Ve,P as Me,c as A,Q as _e,R as Te,S as Le,k as Re,b as k,a as p,F as ge,B as Pe,g as T,d as U,t as ne}from"./Dl_b0jWZ.js";import{c as ke}from"./DjqsqOe8.js";import{u as Ae,g as We,m as ze}from"./Br0SZ-9K.js";import{P as je}from"./CaNnIWQZ.js";import{_ as he,a as ve}from"./pqGRpI0g.js";import{s as L,_ as De}from"./BzTuXq_p.js";const He=BigInt(-1),w=BigInt(0),W=BigInt(1),Je=BigInt(5),R={};let z="0000";for(;z.length<80;)z+=z;function I(n){let t=z;for(;t.length<n;)t+=t;return BigInt("1"+t.substring(0,n))}function H(n,t,s){const i=BigInt(t.width);if(t.signed){const a=W<<i-W;C(s==null||n>=-a&&n<a,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:n}),n>w?n=ae(me(n,i),i):n=-ae(me(-n,i),i)}else{const a=W<<i;C(s==null||n>=0&&n<a,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:n}),n=(n%a+a)%a&a-W}return n}function ie(n){typeof n=="number"&&(n=`fixed128x${n}`);let t=!0,s=128,i=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")t=!1;else{const d=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);V(d,"invalid fixed format","format",n),t=d[1]!=="u",s=parseInt(d[2]),i=parseInt(d[3])}}else if(n){const d=n,l=(c,_,j)=>d[c]==null?j:(V(typeof d[c]===_,"invalid fixed format ("+c+" not "+_+")","format."+c,d[c]),d[c]);t=l("signed","boolean",t),s=l("width","number",s),i=l("decimals","number",i)}V(s%8===0,"invalid FixedNumber width (not byte aligned)","format.width",s),V(i<=80,"invalid FixedNumber decimals (too large)","format.decimals",i);const a=(t?"":"u")+"fixed"+String(s)+"x"+String(i);return{signed:t,width:s,decimals:i,name:a}}function qe(n,t){let s="";n<w&&(s="-",n*=He);let i=n.toString();if(t===0)return s+i;for(;i.length<=t;)i=z+i;const a=i.length-t;for(i=i.substring(0,a)+"."+i.substring(a);i[0]==="0"&&i[1]!==".";)i=i.substring(1);for(;i[i.length-1]==="0"&&i[i.length-2]!==".";)i=i.substring(0,i.length-1);return s+i}var y,u,h,o,$,F,le,oe,ue,ce;const B=class B{constructor(t,s,i){D(this,o);ee(this,"format");D(this,y);D(this,u);D(this,h);ee(this,"_value");Fe(t,R,"FixedNumber"),Z(this,u,s),Z(this,y,i);const a=qe(s,i.decimals);Se(this,{format:i.name,_value:a}),Z(this,h,I(i.decimals))}get signed(){return r(this,y).signed}get width(){return r(this,y).width}get decimals(){return r(this,y).decimals}get value(){return r(this,u)}addUnsafe(t){return m(this,o,le).call(this,t)}add(t){return m(this,o,le).call(this,t,"add")}subUnsafe(t){return m(this,o,oe).call(this,t)}sub(t){return m(this,o,oe).call(this,t,"sub")}mulUnsafe(t){return m(this,o,ue).call(this,t)}mul(t){return m(this,o,ue).call(this,t,"mul")}mulSignal(t){m(this,o,$).call(this,t);const s=r(this,u)*r(t,u);return C(s%r(this,h)===w,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),m(this,o,F).call(this,s/r(this,h),"mulSignal")}divUnsafe(t){return m(this,o,ce).call(this,t)}div(t){return m(this,o,ce).call(this,t,"div")}divSignal(t){C(r(t,u)!==w,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),m(this,o,$).call(this,t);const s=r(this,u)*r(this,h);return C(s%r(t,u)===w,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),m(this,o,F).call(this,s/r(t,u),"divSignal")}cmp(t){let s=this.value,i=t.value;const a=this.decimals-t.decimals;return a>0?i*=I(a):a<0&&(s*=I(-a)),s<i?-1:s>i?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=r(this,u);return r(this,u)<w&&(t-=r(this,h)-W),t=r(this,u)/r(this,h)*r(this,h),m(this,o,F).call(this,t,"floor")}ceiling(){let t=r(this,u);return r(this,u)>w&&(t+=r(this,h)-W),t=r(this,u)/r(this,h)*r(this,h),m(this,o,F).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const s=this.decimals-t,i=Je*I(s-1);let a=this.value+i;const d=I(s);return a=a/d*d,H(a,r(this,y),"round"),new B(R,a,r(this,y))}isZero(){return r(this,u)===w}isNegative(){return r(this,u)<w}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return B.fromString(this.toString(),t)}static fromValue(t,s,i){const a=s==null?0:be(s),d=ie(i);let l=Ce(t,"value");const c=a-d.decimals;if(c>0){const _=I(c);C(l%_===w,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),l/=_}else c<0&&(l*=I(-c));return H(l,d,"fromValue"),new B(R,l,d)}static fromString(t,s){const i=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);V(i&&i[2].length+i[3].length>0,"invalid FixedNumber string value","value",t);const a=ie(s);let d=i[2]||"0",l=i[3]||"";for(;l.length<a.decimals;)l+=z;C(l.substring(a.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),l=l.substring(0,a.decimals);const c=BigInt(i[1]+d+l);return H(c,a,"fromString"),new B(R,c,a)}static fromBytes(t,s){let i=Be(Ee(t,"value"));const a=ie(s);return a.signed&&(i=ae(i,a.width)),H(i,a,"fromBytes"),new B(R,i,a)}};y=new WeakMap,u=new WeakMap,h=new WeakMap,o=new WeakSet,$=function(t){V(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},F=function(t,s){return t=H(t,r(this,y),s),new B(R,t,r(this,y))},le=function(t,s){return m(this,o,$).call(this,t),m(this,o,F).call(this,r(this,u)+r(t,u),s)},oe=function(t,s){return m(this,o,$).call(this,t),m(this,o,F).call(this,r(this,u)-r(t,u),s)},ue=function(t,s){return m(this,o,$).call(this,t),m(this,o,F).call(this,r(this,u)*r(t,u)/r(this,h),s)},ce=function(t,s){return C(r(t,u)!==w,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),m(this,o,$).call(this,t),m(this,o,F).call(this,r(this,u)*r(this,h)/r(t,u),s)};let re=B;function Ge(n,t){V(typeof n=="string","value must be a string","value",n);let s=18;return s=be(t,"unit"),re.fromString(n,{decimals:s,width:512}).value}function Oe(n){return Ge(n,18)}const Ye=de({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(n){const t=n;return Ae(),(s,i)=>(E(),xe(v(je),ye(t,{onMousedown:i[0]||(i[0]=a=>{!a.defaultPrevented&&a.detail>1&&a.preventDefault()})}),{default:N(()=>[we(s.$slots,"default")]),_:3},16))}});typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ze=n=>typeof n<"u";function Ke(n){return JSON.parse(JSON.stringify(n))}function Qe(n,t,s,i={}){var a,d,l;const{clone:c=!1,passive:_=!1,eventName:j,deep:J=!1,defaultValue:Q,shouldEmit:q}=i,x=Ie(),G=s||(x==null?void 0:x.emit)||((a=x==null?void 0:x.$emit)==null?void 0:a.bind(x))||((l=(d=x==null?void 0:x.proxy)==null?void 0:d.$emit)==null?void 0:l.bind(x==null?void 0:x.proxy));let M=j;M=M||`update:${t.toString()}`;const g=b=>c?typeof c=="function"?c(b):Ke(b):b,f=()=>Ze(n[t])?g(n[t]):Q,S=b=>{q?q(b)&&G(M,b):G(M,b)};if(_){const b=f(),X=P(b);let O=!1;return pe(()=>n[t],Y=>{O||(O=!0,X.value=g(Y),$e(()=>O=!1))}),pe(X,Y=>{!O&&(Y!==n[t]||J)&&S(Y)},{deep:J}),X}else return K({get(){return f()},set(b){S(b)}})}const Xe=de({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(n,{emit:t}){const s=n,a=Qe(s,"modelValue",t,{passive:!0,defaultValue:s.defaultValue});return(d,l)=>Ve((E(),A("input",{"onUpdate:modelValue":l[0]||(l[0]=c=>Te(a)?a.value=c:null),"data-slot":"input",class:_e(v(ke)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s.class))},null,2)),[[Me,v(a)]])}}),et=de({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const t=n,s=K(()=>{const{class:i,...a}=t;return a});return(i,a)=>(E(),xe(v(Ye),ye({"data-slot":"label"},s.value,{class:v(ke)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t.class)}),{default:N(()=>[we(i.$slots,"default")]),_:3},16,["class"]))}}),tt={class:"min-h-screen px-6 py-10 text-white"},st={key:0},nt={class:"flex justify-center mb-6"},it=["src"],at={class:"flex items-center justify-center gap-4 mb-6"},rt={key:0,class:"animate-spin h-6 w-6 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},lt={class:"text-center text-sm mb-4"},ot={class:"mb-6"},ut={key:1,class:"flex justify-center px-6 py-16 text-center"},bt={__name:"pack-opening",setup(n){const t=P(1),s=P(""),i=P(!1);let a,d;const l=P(60),c=P(!1),_=K(()=>(t.value*.05).toFixed(2)),j=K(()=>t.value===0?`${T().app.baseURL}/imgs/pacc0.png`:t.value===1?`${T().app.baseURL}/imgs/pacc1.png`:t.value===2?`${T().app.baseURL}/imgs/pacc2.png`:t.value===3?`${T().app.baseURL}/imgs/pacc3.png`:t.value===4?`${T().app.baseURL}/imgs/pacc4.png`:`${T().app.baseURL}/imgs/pacc5.png`),J=()=>{t.value<l.value?t.value++:L(`You can only buy ${l} packs`,e)},Q=()=>{t.value>1&&t.value--},q=async()=>{try{window.ethereum||L("Wallet not found. Install MetaMask.",e),a=new Pe(window.ethereum),(await a.send("eth_accounts",[])).length>0?(d=await a.getSigner(),i.value=!0,await x()):L("Wallet not connected",e)}catch(g){L("Connection Error",g)}},x=async()=>{try{const g=await We();l.value=(250-Number(g))/5,l.value<0&&(l.value=0,t.value=0)}catch(g){L("Error Fetching NFTs",g)}},G=Le(),M=async()=>{try{if(c.value=!0,!i.value)throw new Error("Wallet not connected.");if(t.value>l.value)throw new Error(`You can only buy ${l.value} packs.`);const g=s.value!=""?s.value:await d.getAddress(),f=Oe(_.value),S=await ze(g,t.value,f);console.log("Waiting for confirmation...");const b=await S.wait();console.log("Minting successful! :",S),G.push({path:"/result",query:{address:g,txHash:S.hash,packs:t.value}})}catch(g){L("Minting Error",g)}finally{c.value=!1}};return Re(async()=>{await q()}),(g,f)=>(E(),A(ge,null,[k(v(De)),p("div",tt,[i.value?(E(),A("div",st,[k(v(ve),{class:"max-w-2xl mx-auto p-10 rounded-2xl shadow-lg backdrop-blur border border-white/20"},{default:N(()=>[k(v(he),null,{default:N(()=>[f[7]||(f[7]=p("h1",{class:"text-3xl font-bold mb-6 text-center"},"Open Packs",-1)),p("div",nt,[p("img",{src:j.value,alt:"Pack preview",class:"w-60"},null,8,it)]),p("div",at,[k(v(se),{variant:"outline",onClick:Q,class:"bg-yellow-200 text-xl text-black hover:bg-yellow-300 font-bold"},{default:N(()=>f[1]||(f[1]=[U("-")])),_:1}),k(v(se),{onClick:M,disabled:t.value===0||c.value,class:_e(["sm:w-48 h-14 text-xl font-bold px-6 py-3 flex items-center justify-center",t.value===0||c.value?"bg-gray-400 text-white cursor-not-allowed":"bg-yellow-400 text-black hover:bg-yellow-500"])},{default:N(()=>[c.value?(E(),A("svg",rt,f[2]||(f[2]=[p("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),p("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):(E(),A(ge,{key:1},[U(" Open "+ne(t.value)+" pack"+ne(t.value>1?"s":""),1)],64))]),_:1},8,["disabled","class"]),k(v(se),{variant:"outline",onClick:J,class:"bg-yellow-200 text-xl text-black hover:bg-yellow-300 font-bold"},{default:N(()=>f[3]||(f[3]=[U("+")])),_:1})]),p("p",lt,[f[4]||(f[4]=U(" Estimated total: ")),p("strong",null,ne(_.value)+" ETH",1),f[5]||(f[5]=U(" + gas fee "))]),p("div",ot,[k(v(et),{for:"address"},{default:N(()=>f[6]||(f[6]=[U("Address (optional)")])),_:1}),k(v(Xe),{id:"address",type:"text",placeholder:"0x... or leave blank to use your own",modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=S=>s.value=S),class:"mt-2"},null,8,["modelValue"])]),f[8]||(f[8]=p("p",{class:"text-center text-sm mb-2"},[p("strong",null,"Each pack contains 5 random NFTs and costs 0.05 ETH + gas fee"),p("br"),p("br"),U(" You can open a pack for yourself or for a friend by specifying the destination wallet address. If you don't, the pack will be opened for your current wallet. "),p("br"),p("br"),U(" ⚠️ "),p("strong",null,"Warning"),U(": you can't open more packs if you reach a total of 250 cards on your wallet. ")],-1))]),_:1})]),_:1})])):(E(),A("div",ut,[k(v(ve),{class:"max-w-4xl p-8"},{default:N(()=>[k(v(he),null,{default:N(()=>f[9]||(f[9]=[p("h1",{class:"text-4xl sm:text-5xl md:text-4xl font-bold tracking-tight mb-6 text-center p-4"}," Wallet not connected ",-1),p("p",{class:"md:text-xl leading-relaxed"}," To view your collection, connect with MetaMask ",-1)])),_:1})]),_:1})]))])],64))}};export{bt as default};
